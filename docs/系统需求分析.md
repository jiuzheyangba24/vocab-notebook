# 3. 系统需求分析

**负责人：[填写姓名]**

---

## 3.1 业务需求分析

### 业务流程图（活动图）

```mermaid
flowchart TD
    %% 入口
    Start([开始]) --> Login{用户登录?}
    Login -->|是| User[登录用户]
    Login -->|否| Guest[游客模式]
    User --> Home[进入首页]
    Guest --> Home
    
    %% 首页功能选择
    Home --> Menu{选择功能模块}
    
    %% ========== 词库中心 ==========
    Menu -->|词库中心| Lib[选择词库类别]
    Lib --> Browse[浏览单词列表]
    Browse --> Import{导入?}
    Import -->|是| DoImport[导入到我的词库]
    Import -->|否| Browse
    DoImport --> Home
    
    %% ========== 我的词库 ==========
    Menu -->|我的词库| MyVocab[查看单词列表]
    MyVocab --> VocabOp{操作}
    VocabOp -->|添加| Add[添加单词]
    VocabOp -->|学习| Card[卡片翻转学习]
    VocabOp -->|删除| Del[删除单词]
    Add --> MyVocab
    Card --> MyVocab
    Del --> MyVocab
    
    %% ========== 单词测试 ==========
    Menu -->|单词测试| Mode[选择测试模式]
    Mode --> Count[设置题数]
    Count --> Test[开始测试]
    Test --> Answer[回答问题]
    Answer --> Judge{正确?}
    Judge -->|是| Right[记录正确]
    Judge -->|否| Wrong[加入错题本]
    Right --> Next{下一题?}
    Wrong --> Next
    Next -->|是| Answer
    Next -->|否| Result[显示成绩]
    Result --> Home
    
    %% ========== 学习统计 ==========
    Menu -->|学习统计| Stats[查看统计图表]
    Stats --> Export{导出?}
    Export -->|是| Download[下载CSV/JSON]
    Export -->|否| Home
    Download --> Home
    
    %% ========== 打卡 ==========
    Menu -->|每日打卡| CheckIn{已完成目标?}
    CheckIn -->|是| DoCheck[点击打卡]
    CheckIn -->|否| Tip[提示继续学习]
    DoCheck --> Share{分享?}
    Tip --> Home
    Share -->|是| Poster[生成海报]
    Share -->|否| Home
    Poster --> Home
    
    %% ========== AI助手 ==========
    Menu -->|AI助手| AI[发送问题]
    AI --> Advice[获取学习建议]
    Advice --> Home
```

---


## 3.2 用户需求分析

### （1）用例图

```mermaid
flowchart TB
    subgraph System["词汇学习系统"]
        UC1((注册/登录))
        UC2((浏览词库中心))
        UC3((导入单词到词库))
        UC4((管理我的词库))
        UC5((卡片式学习))
        UC6((英译中测试))
        UC7((中译英测试))
        UC8((填空拼写测试))
        UC9((听写测试))
        UC10((查看错题本))
        UC11((复习错题))
        UC12((查看学习统计))
        UC13((导出数据))
        UC14((每日打卡))
        UC15((分享打卡海报))
        UC16((AI学习助手))
        UC17((设置学习目标))
    end
    
    User((学习用户))
    Guest((游客))
    
    User --> UC1
    User --> UC2
    User --> UC3
    User --> UC4
    User --> UC5
    User --> UC6
    User --> UC7
    User --> UC8
    User --> UC9
    User --> UC10
    User --> UC11
    User --> UC12
    User --> UC13
    User --> UC14
    User --> UC15
    User --> UC16
    User --> UC17
    
    Guest --> UC2
    Guest --> UC4
    Guest --> UC5
    Guest --> UC6
    Guest --> UC7
    Guest --> UC8
```

---

### （2）用例解说

| 用例编号 | 用例名称 | 参与者 | 前置条件 | 基本流程 | 备注 |
|---------|---------|--------|----------|----------|------|
| UC1 | 注册/登录 | 用户 | 无 | 输入用户名密码→验证→进入系统 | 支持游客模式 |
| UC2 | 浏览词库中心 | 用户/游客 | 进入系统 | 选择词库类别→查看单词列表 | 内置初中/高中/四六级/考研词库 |
| UC3 | 导入单词到词库 | 用户 | 已浏览词库 | 选择单词→点击导入→确认 | 自动去重 |
| UC4 | 管理我的词库 | 用户/游客 | 已有单词 | 添加/删除/查看单词 | 支持批量添加 |
| UC5 | 卡片式学习 | 用户/游客 | 词库有单词 | 查看单词→翻转卡片→查看释义 | 支持发音 |
| UC6 | 英译中测试 | 用户/游客 | 词库≥4个单词 | 看英文→选中文释义 | 4选1选择题 |
| UC7 | 中译英测试 | 用户/游客 | 词库≥4个单词 | 看中文→选英文单词 | 4选1选择题 |
| UC8 | 填空拼写测试 | 用户/游客 | 词库≥1个单词 | 看释义→拼写单词 | 显示首字母提示 |
| UC9 | 听写测试 | 用户/游客 | 词库≥1个单词 | 听发音→拼写单词 | 可重复播放 |
| UC10 | 查看错题本 | 用户/游客 | 有错题记录 | 查看错误单词列表 | 可标记已掌握 |
| UC11 | 复习错题 | 用户/游客 | 有错题记录 | 针对错题进行测试 | 强化薄弱环节 |
| UC12 | 查看学习统计 | 用户/游客 | 有学习记录 | 查看饼图/折线图 | 显示掌握程度分布 |
| UC13 | 导出数据 | 用户/游客 | 有数据 | 选择格式→下载文件 | 支持CSV/JSON/报告 |
| UC14 | 每日打卡 | 用户/游客 | 完成每日目标 | 点击打卡→记录 | 显示连续天数 |
| UC15 | 分享打卡海报 | 用户/游客 | 已打卡 | 生成海报→保存/分享 | Canvas生成图片 |
| UC16 | AI学习助手 | 用户 | 已登录 | 发送问题→获取建议 | 调用通义千问API |
| UC17 | 设置学习目标 | 用户/游客 | 进入系统 | 设置每日单词数 | 默认10个/天 |

---

## 3.3 系统总体架构图

```mermaid
flowchart TB
    subgraph Client["前端展示层 (Vue 3)"]
        direction TB
        UI[用户界面]
        Router[Vue Router 路由]
        Store[Pinia 状态管理]
        Composables[Composables 组合式函数]
    end
    
    subgraph API["后端服务层 (Node.js + Express)"]
        direction TB
        AuthAPI[认证接口 /api/auth]
        WordsAPI[单词接口 /api/words]
        StatsAPI[统计接口 /api/stats]
        Middleware[JWT 中间件]
    end
    
    subgraph Database["数据存储层 (MySQL)"]
        direction TB
        Users[(users 用户表)]
        Words[(words 单词表)]
        Records[(study_records 学习记录)]
        Wrong[(wrong_questions 错题本)]
        Stats[(daily_statistics 统计表)]
    end
    
    subgraph External["外部服务"]
        direction TB
        Speech[Web Speech API<br/>语音合成]
        AI[通义千问 API<br/>AI助手]
        LocalStorage[LocalStorage<br/>本地存储]
    end
    
    UI --> Router
    Router --> Store
    Store --> Composables
    Composables --> API
    
    API --> Middleware
    Middleware --> Database
    
    UI --> Speech
    Composables --> AI
    Store --> LocalStorage
    
    AuthAPI --> Users
    WordsAPI --> Words
    WordsAPI --> Records
    WordsAPI --> Wrong
    StatsAPI --> Stats
```

### 技术栈说明

| 层次 | 技术 | 说明 |
|------|------|------|
| **前端** | Vue 3 + Vite | 响应式用户界面 |
| **状态管理** | Pinia | 全局状态管理 |
| **路由** | Vue Router 4 | SPA路由控制 |
| **后端** | Node.js + Express | RESTful API服务 |
| **数据库** | MySQL 8.0 | 关系型数据存储 |
| **认证** | JWT (JSON Web Token) | 用户身份验证 |
| **语音** | Web Speech API | 单词发音功能 |
| **AI** | 通义千问 (DashScope) | AI学习建议 |
